{% extends "base.html" %}
{% load static %}

{% block title %}Book Transport - TSafari{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'motorbike/css/booking.css' %}">
{% endblock %}

{% block content %}
<section class="booking-bg">
  <div class="booking-box">
    <h2>Find Nearby Transport</h2>
    <form method="GET" action="#">
      <label for="location">Enter Your Location:</label>
      <input type="text" id="location" name="location" placeholder="e.g. Nairobi West" required>
      <button type="submit">Check Availability</button>
    </form>

    <div class="transport-results">
      <h3>Available Drivers</h3>

      <!-- Driver Card Loop (example static, replace with dynamic data) -->
      <div class="driver-grid">
        {% for driver in available_drivers %}
        <div class="driver-card">
          <img src="{{ driver.photo_url|default:'/static/motorbike/images/default_driver.png' }}" alt="Driver Photo" class="driver-photo">
          <h4>{{ driver.name }}</h4>
          <p><strong>Transport:</strong> {{ driver.role|title }}</p>
          <p><strong>Plate:</strong> {{ driver.number_plate }}</p>
          <p><strong>Sacco:</strong> {{ driver.sacco }}</p>
          <p><strong>Stage:</strong> {{ driver.stage }}</p>
          <p><strong>Rating:</strong> {{ driver.rating|default:"4.5" }}/5 ‚≠ê</p>
          <p><strong>Distance:</strong> ~2.3 km away</p>
          <form action="{% url 'choose_trip' driver.id %}" method="GET">
            <button type="submit" class="select-btn">Select</button>
          </form>
        </div>
        {% empty %}
        <p>No available drivers around your location at this moment.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endblock %}
